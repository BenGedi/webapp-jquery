/*! Packages 12-01-2015 */

$(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=$(".tabs li a"),B=$(".tab"),C=$(".notifications").eq(0),D=$(".bookmarks"),E=$(".frmSettings"),F=$(".tab .btn-settings"),G={};a=function(a){for(var b=0;b<a.length;b++)if(a.eq(b).hasClass("tab-active"))return a.eq(b)},b=function(a){for(var b=0;b<a.length;b++)if(!a.eq(b).hasClass("hidden"))return a.eq(b)},p=function(a,b,c){x=a,w=b,z=c?c:w[0].id.slice(4)},l=function(a){var b=$("#tab-"+a),c=$('.tabs ul a[href="#'+a+'"]');x.removeClass("tab-active"),w.addClass("hidden"),location.hash=a,c.addClass("tab-active"),b.removeClass("hidden"),p(c,b,a)},h=function(a){a.hasClass("invalid")&&a.removeClass("invalid")},m=function(a,b){$.each(a,function(a,c){c.toggleClass(b)})},c=function(a){var b=$(a.target),c=$("#settings-"+z);b.toggleClass("active"),c.toggleClass("hidden")},n=function(a){u.attr("src",a),v.attr("href",a)},d=function(a,b,c){var d=$("<option></option>");c=e(c),d.attr("value",c),d.text(b),a.append(d)},j=function(a){a.preventDefault();var b=a.target,c=b.options[b.selectedIndex].value;n(c)},i=function(a){for(;a.eq(0).children().length>0;)a.eq(0).find("option:first").remove()},f=function(a){var b=/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-zA-Z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/;return b.test(a)},e=function(a){var b=/^(https?:\/\/www.)/i;return b.test(a)?a.toLowerCase():"http://www."+a.toLowerCase()},o=function(a,b,c){for(var e,g,i=0;i<a.length;i++)g=b.eq(i).val(),e=a.eq(i).val(),""===g||f(g)||(b.eq(i).val(""),g=""),""===e||""!==g?""!==e||""===g?(""!==e&&""!==g?d(c,e,g):y++,h(a.eq(i)),h(b.eq(i))):a.eq(i).addClass("invalid"):b.eq(i).addClass("invalid")},k=function(a){a.preventDefault(),u=$("#content-"+z+" iframe"),v=$("#expand-"+z),y=0;var b=$(a.target),c=$("#bookmarks-"+z).eq(0),d=b.find('input[type="text"]'),e=b.find('input[type="url"]'),f=[c,v,u.parent()];if(c.children().length>0&&i(c,e),o(d,e,c),b.find("input.invalid").length>0)return b.find("input.invalid").eq(0).focus(),!1;if(3===y)return m(f,"hidden"),!1;c.hasClass("hidden")&&m(f,"hidden"),c.focus();var g=c.children(0).attr("value");return n(g),$("#btnSettings-"+z).click(),q(),!0},q=function(){if(Modernizr.localstorage){var a=$('[data-js="formTab"]');$.each(a,function(a,b){for(var c=b.id.slice(4).replace(/-/g,""),d=$(b),e=d.html(),f=d.find(".frmSettings-input"),g=d.find("select")[0].selectedIndex,h=[],i=0;i<f.length;i++){var j=f[i];h.push(j.value)}G[c]=[e,g,h,z]}),localStorage.setItem("dataObj",JSON.stringify(G))}},r=function(){if(Modernizr.localstorage&&localStorage.getItem("dataObj")){var a,b=$('[data-js="formTab"]'),c=0;try{a=JSON.parse(localStorage.getItem("dataObj"))}catch(d){return console.log(d),!1}for(var e in a)if(a.hasOwnProperty(e)){var f,g,h,i,j,k=a[e],l=k[0],m=k[1],n=k[2],o=k[3],p=b.eq(c++);p.html(l),g=p.find(".frmSettings-input");for(var q=0;q<g.length;q++)g[q].value=n[q];h=p.find("select"),h[0].selectedIndex=m,m>-1&&(f=h[0].options[h[0].selectedIndex].value,i=p.find("iframe"),i.attr("src",f),j=p.find("#expand-"+o),j.attr("href",f))}}},g=function(a){a.preventDefault();var b="hashchange"===a.type?a.target.location.href:a.target.href,c=b.indexOf("#")+1,d=b.slice(c);return d===z?!1:void l(d)},t=function(){for(var a=0;4>a;a++)2>a&&(E.eq(a).submit(k),F.eq(a).click(c),D.eq(a).change(j)),A.eq(a).click(g)},(s=function(){$(window).bind("hashchange",g),C.addClass("hidden"),r(),t(),p(a(A),b(B)),$.ajax({url:"data/notification.txt",dataType:"text"}).done(function(a){a&&""!==a&&(C.removeClass("hidden"),C.text(a))}).fail(function(a){C.removeClass("hidden"),C.text(a)})})()});
//# sourceMappingURL=main.min.js.map