/*! Packages 12-01-2015 */

!function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=a(".tabs li a"),C=a(".tab"),D=a(".notifications").eq(0),E=a(".bookmarks"),F=a(".frmSettings"),G=a(".tab .btn-settings"),H={};b=function(a){for(var b=0;b<a.length;b++)if(a.eq(b).hasClass("tab-active"))return a.eq(b)},c=function(a){for(var b=0;b<a.length;b++)if(!a.eq(b).hasClass("hidden"))return a.eq(b)},q=function(a,b,c){y=a,x=b,A=c?c:x[0].id.slice(4)},m=function(b){var c=a("#tab-"+b),d=a('.tabs ul a[href="#'+b+'"]');y.removeClass("tab-active"),x.addClass("hidden"),location.hash=b,d.addClass("tab-active"),c.removeClass("hidden"),q(d,c,b)},i=function(a){a.hasClass("invalid")&&a.removeClass("invalid")},n=function(b,c){a.each(b,function(a,b){b.toggleClass(c)})},d=function(b){var c=a(b.target),d=a("#settings-"+A);c.toggleClass("active"),d.toggleClass("hidden")},o=function(a){v.attr("src",a),w.attr("href",a)},e=function(b,c,d){var e=a("<option></option>");d=f(d),e.attr("value",d),e.text(c),b.append(e)},k=function(a){a.preventDefault();var b=a.target,c=b.options[b.selectedIndex].value;o(c)},j=function(a){for(;a.eq(0).children().length>0;)a.eq(0).find("option:first").remove()},g=function(a){var b=/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-zA-Z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/;return b.test(a)},f=function(a){var b=/^(https?:\/\/www.)/i;return b.test(a)?a.toLowerCase():"http://www."+a.toLowerCase()},p=function(a,b,c){for(var d,f,h=0;h<a.length;h++)f=b.eq(h).val(),d=a.eq(h).val(),""===f||g(f)||(b.eq(h).val(""),f=""),""===d||""!==f?""!==d||""===f?(""!==d&&""!==f?e(c,d,f):z++,i(a.eq(h)),i(b.eq(h))):a.eq(h).addClass("invalid"):b.eq(h).addClass("invalid")},l=function(b){b.preventDefault(),v=a("#content-"+A+" iframe"),w=a("#expand-"+A),z=0;var c=a(b.target),d=a("#bookmarks-"+A).eq(0),e=c.find('input[type="text"]'),f=c.find('input[type="url"]'),g=[d,w,v.parent()];if(d.children().length>0&&j(d,f),p(e,f,d),c.find("input.invalid").length>0)return c.find("input.invalid").eq(0).focus(),!1;if(3===z)return n(g,"hidden"),!1;d.hasClass("hidden")&&n(g,"hidden"),d.focus();var h=d.children(0).attr("value");return o(h),a("#btnSettings-"+A).click(),r(),!0},r=function(){if(Modernizr.localstorage){var b=a('[data-js="formTab"]');a.each(b,function(b,c){for(var d=c.id.slice(4).replace(/-/g,""),e=a(c),f=e.html(),g=e.find(".frmSettings-input"),h=e.find("select")[0].selectedIndex,i=[],j=0;j<g.length;j++){var k=g[j];i.push(k.value)}H[d]=[f,h,i,A]}),localStorage.setItem("dataObj",JSON.stringify(H))}},s=function(){if(Modernizr.localstorage&&localStorage.getItem("dataObj")){var b,c=a('[data-js="formTab"]'),d=0;try{b=JSON.parse(localStorage.getItem("dataObj"))}catch(e){return console.log(e),!1}for(var f in b)if(b.hasOwnProperty(f)){var g,h,i,j,k,l=b[f],m=l[0],n=l[1],o=l[2],p=l[3],q=c.eq(d++);q.html(m),h=q.find(".frmSettings-input");for(var r=0;r<h.length;r++)h[r].value=o[r];i=q.find("select"),i[0].selectedIndex=n,n>-1&&(g=i[0].options[i[0].selectedIndex].value,j=q.find("iframe"),j.attr("src",g),k=q.find("#expand-"+p),k.attr("href",g))}}},h=function(a){a.preventDefault();var b="hashchange"===a.type?a.target.location.href:a.target.href,c=b.indexOf("#")+1,d=b.slice(c);return d===A?!1:void m(d)},u=function(){for(var a=0;4>a;a++)2>a&&(F.eq(a).submit(l),G.eq(a).click(d),E.eq(a).change(k)),B.eq(a).click(h)},(t=function(){a(window).bind("hashchange",h),D.addClass("hidden"),s(),u(),q(b(B),c(C)),a.ajax({url:"data/notification.txt",dataType:"text"}).done(function(a){a&&""!==a&&(D.removeClass("hidden"),D.text(a))}).fail(function(a){D.removeClass("hidden"),D.text(a)})})()}(jQuery);
//# sourceMappingURL=main.min.js.map