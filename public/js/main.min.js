/*! Packages 12-01-2015 */

$(function(){"use strict";var a,b,c,d,e,f,g=$(".tabs li a"),h=$(".tab"),i=$(".notifications").eq(0),j=$(".bookmarks"),k=$(".frmSettings"),l=$(".tab .btn-settings"),m=$('[role="search"]'),n=$(".frmSettings-footer a"),o={},p=function(a){for(var b=0;b<a.length;b++)if(a.eq(b).hasClass("tab-active"))return a.eq(b)},q=function(a){for(var b=0;b<a.length;b++)if(!a.eq(b).hasClass("hidden"))return a.eq(b)},r=function(a,b,e){d=a,c=b,f=e?e:c[0].id.slice(4)},s=function(a){var b=$("#tab-"+a),e=$('.tabs ul a[href="#'+a+'"]');d.removeClass("tab-active"),c.addClass("hidden"),location.hash=a,e.addClass("tab-active"),b.removeClass("hidden"),r(e,b,a)},t=function(a){a.hasClass("invalid")&&a.removeClass("invalid")},u=function(a,b){$.each(a,function(a,c){c.toggleClass(b)})},v=function(a){var b=$(a.target),c=$("#settings-"+f);b.toggleClass("active"),c.toggleClass("hidden")},w=function(c){a.attr("src",c),b.attr("href",c)},x=function(a){a.preventDefault(),$("#btnSettings-"+f).click()},y=function(a,b,c){var d=$("<option></option>");c=C(c),d.attr("value",c),d.text(b),a.append(d)},z=function(a){a.preventDefault();var b=a.target,c=b.options[b.selectedIndex].value;w(c)},A=function(a){for(;a.eq(0).children().length>0;)a.eq(0).find("option:first").remove()},B=function(a){var b=/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-zA-Z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/;return b.test(a)},C=function(a){var b=/^(https?:\/\/www.)/i;return b.test(a)?a.toLowerCase():"http://www."+a.toLowerCase()},D=function(a,b,c){for(var d,f,g=0;g<a.length;g++)f=b.eq(g).val(),d=a.eq(g).val(),""===f||B(f)||(b.eq(g).val(""),f=""),""===d||""!==f?""!==d||""===f?(""!==d&&""!==f?y(c,d,f):e++,t(a.eq(g)),t(b.eq(g))):a.eq(g).addClass("invalid"):b.eq(g).addClass("invalid")},E=function(c){c.preventDefault(),a=$("#content-"+f+" iframe"),b=$("#expand-"+f),e=0;var d=$(c.target),g=$("#bookmarks-"+f).eq(0),h=d.find('input[type="text"]'),i=d.find('input[type="url"]'),j=[g,b,a.parent()];if(g.children().length>0&&A(g,i),D(h,i,g),d.find("input.invalid").length>0)return d.find("input.invalid").eq(0).focus(),!1;if(3!==e){g.hasClass("hidden")&&u(j,"hidden"),g.focus();var k=g.children(0).attr("value");return w(k),$("#btnSettings-"+f).click(),F(),!0}return g.hasClass("hidden")?!1:void u(j,"hidden")},F=function(){if(Modernizr.localstorage){var a=$('[data-js="formTab"]'),b=[],c=[];$.each(a,function(a,d){for(var e,f=d.id.slice(4).replace(/-/g,""),g=$(d),h=g.find('input[type="text"]'),i=g.find('input[type="url"]'),j=0;j<h.length;j++)b.push(h.eq(j).val()),c.push(i.eq(j).val());e=[b,c],o[f]=e,b=[],c=[]}),localStorage.setItem("dataObj",JSON.stringify(o))}},G=function(){if(Modernizr.localstorage&&localStorage.getItem("dataObj")){var a,b=$('[data-js="formTab"]'),c=0;try{a=JSON.parse(localStorage.getItem("dataObj"))}catch(d){return console.log(d),!1}for(var e in a)if(a.hasOwnProperty(e))for(var f=a[e],g=f[0],h=f[1],i=b.eq(c++),j=i.find('input[type="text"]'),k=i.find('input[type="url"]'),l=0;l<g.length;l++)j.eq(l).val(g[l]),k.eq(l).val(h[l])}},H=function(a){a.preventDefault();var b="hashchange"===a.type?a.target.location.href:a.target.href,c=b.indexOf("#")+1,d=b.slice(c);return d===f?!1:void s(d)},I=function(){m.eq(0).on("submit",x);for(var a=0;4>a;a++)2>a&&(k.eq(a).submit(E),l.eq(a).click(v),j.eq(a).change(z),n.eq(a).click(x)),g.eq(a).click(H)},J=function(){$(window).bind("hashchange",H),i.addClass("hidden"),G(),I(),r(p(g),q(h)),$.ajax({url:"data/notification.txt",dataType:"text"}).done(function(a){a&&""!==a&&(i.removeClass("hidden"),i.text(a))}).fail(function(a){i.removeClass("hidden"),i.text(a)})};J()});
//# sourceMappingURL=main.min.js.map