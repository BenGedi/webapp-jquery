/*! Packages 12-01-2015 */

$(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=$(".tabs li a"),C=$(".tab"),D=$(".notifications").eq(0),E=$(".bookmarks"),F=$(".frmSettings"),G=$(".tab .btn-settings"),H=$('[role="search"]'),I=$(".frmSettings-footer a"),J={};a=function(a){for(var b=0;b<a.length;b++)if(a.eq(b).hasClass("tab-active"))return a.eq(b)},b=function(a){for(var b=0;b<a.length;b++)if(!a.eq(b).hasClass("hidden"))return a.eq(b)},p=function(a,b,c){y=a,x=b,A=c?c:x[0].id.slice(4)},l=function(a){var b=$("#tab-"+a),c=$('.tabs ul a[href="#'+a+'"]');y.removeClass("tab-active"),x.addClass("hidden"),location.hash=a,c.addClass("tab-active"),b.removeClass("hidden"),p(c,b,a)},h=function(a){a.hasClass("invalid")&&a.removeClass("invalid")},m=function(a,b){$.each(a,function(a,c){c.toggleClass(b)})},c=function(a){var b=$(a.target),c=$("#settings-"+A);b.toggleClass("active"),c.toggleClass("hidden")},n=function(a){v.attr("src",a),w.attr("href",a)},u=function(a){a.preventDefault(),$("#btnSettings-"+A).click()},d=function(a,b,c){var d=$("<option></option>");c=e(c),d.attr("value",c),d.text(b),a.append(d)},j=function(a){a.preventDefault();var b=a.target,c=b.options[b.selectedIndex].value;n(c)},i=function(a){for(;a.eq(0).children().length>0;)a.eq(0).find("option:first").remove()},f=function(a){var b=/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-zA-Z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/;return b.test(a)},e=function(a){var b=/^(https?:\/\/www.)/i;return b.test(a)?a.toLowerCase():"http://www."+a.toLowerCase()},o=function(a,b,c){for(var e,g,i=0;i<a.length;i++)g=b.eq(i).val(),e=a.eq(i).val(),""===g||f(g)||(b.eq(i).val(""),g=""),""===e||""!==g?""!==e||""===g?(""!==e&&""!==g?d(c,e,g):z++,h(a.eq(i)),h(b.eq(i))):a.eq(i).addClass("invalid"):b.eq(i).addClass("invalid")},k=function(a){a.preventDefault(),v=$("#content-"+A+" iframe"),w=$("#expand-"+A),z=0;var b=$(a.target),c=$("#bookmarks-"+A).eq(0),d=b.find('input[type="text"]'),e=b.find('input[type="url"]'),f=[c,w,v.parent()];if(c.children().length>0&&i(c,e),o(d,e,c),b.find("input.invalid").length>0)return b.find("input.invalid").eq(0).focus(),!1;if(3!==z){c.hasClass("hidden")&&m(f,"hidden"),c.focus();var g=c.children(0).attr("value");return n(g),$("#btnSettings-"+A).click(),q(),!0}return c.hasClass("hidden")?!1:void m(f,"hidden")},q=function(){if(Modernizr.localstorage){var a=$('[data-js="formTab"]'),b=[],c=[];$.each(a,function(a,d){for(var e,f=d.id.slice(4).replace(/-/g,""),g=$(d),h=g.find('input[type="text"]'),i=g.find('input[type="url"]'),j=0;j<h.length;j++)b.push(h.eq(j).val()),console.log(h.eq(j).val()),c.push(i.eq(j).val()),console.log(i.eq(j).val());e=[b,c],J[f]=e,b=[],c=[]}),localStorage.setItem("dataObj",JSON.stringify(J))}},r=function(){if(Modernizr.localstorage&&localStorage.getItem("dataObj")){var a,b=$('[data-js="formTab"]'),c=0;try{a=JSON.parse(localStorage.getItem("dataObj"))}catch(d){return console.log(d),!1}for(var e in a)if(a.hasOwnProperty(e))for(var f=a[e],g=f[0],h=f[1],i=b.eq(c++),j=i.find('input[type="text"]'),k=i.find('input[type="url"]'),l=0;l<g.length;l++)j.eq(l).val(g[l]),k.eq(l).val(h[l])}},g=function(a){a.preventDefault();var b="hashchange"===a.type?a.target.location.href:a.target.href,c=b.indexOf("#")+1,d=b.slice(c);return d===A?!1:void l(d)},t=function(){H.eq(0).on("submit",u);for(var a=0;4>a;a++)2>a&&(F.eq(a).submit(k),G.eq(a).click(c),E.eq(a).change(j),I.eq(a).click(u)),B.eq(a).click(g)},(s=function(){$(window).bind("hashchange",g),D.addClass("hidden"),r(),t(),p(a(B),b(C)),$.ajax({url:"data/notification.txt",dataType:"text"}).done(function(a){a&&""!==a&&(D.removeClass("hidden"),D.text(a))}).fail(function(a){D.removeClass("hidden"),D.text(a)})})()});
//# sourceMappingURL=main.min.js.map